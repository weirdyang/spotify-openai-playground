<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <title>Twitter Music Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://cdn.jsdelivr.net/npm/daisyui@2.50.0/dist/full.css"
        rel="stylesheet"
    >
</head>

<body class="flex flex-col items-center justify-center min-h-screen bg-base-200 text-base-content">
    <h1 class="text-4xl font-bold mb-6">Twitter Music Profile</h1>
    <div class="flex flex-col items-center gap-3">
        <input
            type="text"
            id="twitterHandle"
            placeholder="Enter Twitter handle"
            class="input input-bordered w-full max-w-xs"
        >
        <button
            onclick="fetchData()"
            class="btn btn-primary"
        >Get Music Profile</button>
    </div>

    <div
        id="container"
        class="hidden card w-96 bg-base-100 shadow-xl mt-6 p-4"
    >
        <figure><img
                id="banner"
                src=""
                alt="Banner"
                class="w-full h-40 object-cover rounded-t-lg"
            ></figure>
        <div class="flex flex-col items-center -mt-12">
            <img
                id="profile"
                src=""
                alt="Profile Picture"
                class="w-24 h-24 rounded-full border-4 border-white shadow-md"
            >
            <h2
                id="genre"
                class="text-lg font-semibold mt-2"
            ><span class="badge badge-primary px-3 py-2"></span></h2>
            <img
                id="albumCover"
                src=""
                alt="Album Cover"
                class="w-32 h-32 mt-2 rounded-lg shadow-md"
            >
            <p
                id="song"
                class="text-md font-bold mt-2"
            ></p>
            <a
                id="songLink"
                href="#"
                target="_blank"
                class="btn btn-secondary mt-2"
            >Listen on Spotify</a>
        </div>
    </div>

    <script>
        function fetchData() {
            const handle = document.getElementById('twitterHandle').value;
            if (!handle) {
                alert('Please enter a Twitter handle');
                return;
            }

            // Fake API Call - Replace with actual API endpoint
            fetch(`/.netlify/functions/analyze?q=${handle}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('banner').src = data.banner;
                    document.getElementById('profile').src = data.profile;
                    document.querySelector('#genre span').innerText = data.genre;
                    document.getElementById('song').innerText = `${data.song.name} by ${data.song.artist}`;
                    document.getElementById('songLink').href = data.song.url;
                    document.getElementById('albumCover').src = data.song.img;
                    document.getElementById('container').classList.remove('hidden');
                })
                .catch(error => console.error('Error fetching data:', error));
        }
    </script>
</body>

</html>